<div class="container">
  <div class="main-card">

    <!-- NOTIFICATION EN DUR (statique) -->
    <mat-card 
      class="profile-card" 
      style="cursor: pointer;"
      (click)="goToScanUser('68492eda2af9a53df9fecbb8')"
    >
      <span class="status-dot unread"></span>
      <div class="profile-content">
        <img src="../../../../assets/images/kendal.png" alt="Profile Picture" class="profile-picture">
        <div class="profile-info">
          <h3 class="profile-name">
            Kendall Jenner
          </h3>
          <p>
            A scanné votre produit <strong>Mule Bom Dia</strong> à <strong>Boston</strong> le <strong>18/06/2025</strong>.
          </p>
        </div>
      </div>
    </mat-card>


    <div *ngFor="let notif of notifications">
        <mat-card 
          *ngIf="notif.data.productOwnerId === currentuserId"
          class="profile-card" (click)="markAsRead(notif)"
          style="cursor: pointer;"
        >
          <span 
            class="status-dot" 
            [ngClass]="notif.isRead === 'non' ? 'unread' : 'read'"
          ></span>
          <div class="profile-content" *ngIf="userInfos.has(notif.userId)">
            <img *ngIf="userInfos.get(notif.userId)?.photo" [src]="userInfos.get(notif.userId)?.photo" alt="Profile Picture" class="profile-picture">
            <div class="profile-info">
              <h3 class="profile-name">
                {{ userInfos.get(notif.userId)?.firstName || 'Unknown User' }} 
                {{ userInfos.get(notif.userId)?.lastName || '' }}
              </h3>
              <p *ngIf="filteredProducts.get(notif._id)">
                Souhaite faire une {{notif.type}} du produit <strong>{{filteredProducts.get(notif._id).name}} </strong>
              </p>
            </div>
          </div>
        </mat-card>
    </div>
  </div>

  <div class="secondary-card">

  </div>

</div>
  